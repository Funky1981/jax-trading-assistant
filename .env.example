# =============================================================================
# JAX Trading Assistant - Environment Configuration
# =============================================================================
# Copy this file to .env and modify as needed:
#   cp .env.example .env
#
# This file configures ALL services. Docker Compose automatically loads it.
# =============================================================================

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# SECURITY: Use scripts/generate-credentials.ps1 to create secure passwords
POSTGRES_USER=jax
POSTGRES_PASSWORD=jax
POSTGRES_DB=jax
DATABASE_URL=postgresql://jax:jax@postgres:5432/jax
KNOWLEDGE_DATABASE_URL=postgresql://jax:jax@postgres:5432/jax_knowledge

# For local development outside Docker:
# DATABASE_URL=postgresql://jax:jax@localhost:5432/jax

# -----------------------------------------------------------------------------
# Redis Configuration (optional - for future distributed rate limiting)
# -----------------------------------------------------------------------------
REDIS_PASSWORD=your_redis_password_here
REDIS_URL=redis://:your_redis_password_here@redis:6379/0

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
# SECURITY: Use scripts/generate-credentials.ps1 to generate a secure secret
# Use a long, random string (64+ characters recommended)
JWT_SECRET=change_this_to_a_secure_random_string_min_64_chars
JWT_EXPIRY=24h
JWT_REFRESH_EXPIRY=168h

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:5173
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization
CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_ENABLED=true

# -----------------------------------------------------------------------------
# Market Data Provider
# -----------------------------------------------------------------------------
# Options: alpaca, polygon, ib (Interactive Brokers)
MARKET_DATA_PROVIDER=ib

# Alpaca (if using alpaca provider)
# ALPACA_API_KEY=your_key_here
# ALPACA_API_SECRET=your_secret_here

# Polygon (if using polygon provider)
# POLYGON_API_KEY=your_key_here

# Interactive Brokers Gateway (if using ib provider)
# No API key needed - uses socket connection
IB_GATEWAY_HOST=127.0.0.1
IB_GATEWAY_PORT=7497
IB_CLIENT_ID=1

# -----------------------------------------------------------------------------
# Services
# -----------------------------------------------------------------------------
# jax-api
JAX_API_PORT=8081

# jax-memory
JAX_MEMORY_PORT=8090
HINDSIGHT_URL=http://hindsight:8888

# jax-ingest (for scheduled jobs)
JAX_INGEST_INTERVAL=60
JAX_SYMBOLS=SPY,QQQ,AAPL,MSFT,NVDA

# -----------------------------------------------------------------------------
# Frontend
# -----------------------------------------------------------------------------
VITE_API_URL=http://localhost:8081
VITE_MEMORY_API_URL=http://localhost:8090

# -----------------------------------------------------------------------------
# Logging / Debug
# -----------------------------------------------------------------------------
LOG_LEVEL=info
# Set to true for verbose output
DEBUG=false
